<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Minecraft File Download</title>
        <style>
            body {
                font-family: sans-serif;
                background: #111;
                color: white;
                padding: 20px;
            }
            .card {
                background: #222;
                padding: 15px;
                margin: 10px 0;
                border-radius: 8px;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            .icon {
                font-size: 24px;
                margin-right: 10px;
            }
            .file-info {
                display: flex;
                align-items: center;
            }
            button {
                padding: 6px 12px;
                background: #444;
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
        </style>
    </head>
    <body>
        <h2>ğŸ“ Daftar File Minecraft</h2>
        <div id="file-list"></div>

        <script>
            const files = [
              { name: "MyMinecraftWorld.zip", url: "files/MyMinecraftWorld.zip" }
            ];

            function getIcon(filename) {
              const ext = filename.split('.').pop().toLowerCase();
              if (filename.includes('bedrock-server')) return 'ğŸ–¥ï¸';
              if (ext === 'zip') return 'ğŸ—œï¸';
              if (ext === 'pdf') return 'ğŸ“„';
              if (ext === 'jpg' || ext === 'png') return 'ğŸ–¼ï¸';
              return 'ğŸ“';
            }

            function render(file) {
              const el = document.createElement('div');
              el.className = 'card';
              el.innerHTML = `
                <div class="file-info">
                  <div class="icon">${getIcon(file.name)}</div>
                  <div>${file.name}</div>
                </div>
                <a href="${file.url}" download><button>Download</button></a>
              `;
              document.getElementById('file-list').appendChild(el);
            }

            // Render local files
            files.forEach(render);

            // Fetch Bedrock Server (CDN) from Minecraft.net using CORS proxy
            const proxy = "https://api.allorigins.win/get?url=" + encodeURIComponent("https://www.minecraft.net/en-us/download/server/bedrock");

            fetch(proxy)
              .then(res => res.json())
              .then(data => {
                const html = data.contents;
                const match = html.match(/https:\\/\\/minecraft\.azureedge\.net\\/bin-win\\/bedrock-server-[\d.]+\.zip/);
                if (match) {
                  const url = match[0].replace(/\\/g, '');
                  const version = url.match(/bedrock-server-([\d.]+)\.zip/)[1];
                  render({ name: `Bedrock Server (${version})`, url });
                }
              });
        </script>
    </body>
</html>
